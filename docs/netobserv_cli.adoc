// Automatically generated by './scripts/generate-doc.sh'. Do not edit, or make the NETOBSERV team aware of the editions.
:_mod-docs-content-type: REFERENCE
[id="network-observability-cli-usage_{context}"]
= Network Observability CLI usage

You can use the The Network Observability CLI (`oc netobserv`) to pass command line arguments to capture flow data and packet data for further analysis, enable Network Observability Operator features or pass configuration options to the eBPF agent and flowlogs-pipeline.
== Syntax 
The basic syntax for `oc netobserv` commands: 

.`oc netobserv` syntax
[source,terminal]
----
$ oc netobserv [<command>] [<feature_option>] [<command_options>] <1>
----
<1> Feature options can only be used with the `oc netobserv flows` command. They cannot be used with the `oc netobserv packets` command.

== Basic commands
[cols="3a,8a",options="header"]
.Basic commands
|===
| Command | Description
| flows
| Capture flows information. For subcommands, see the "Flow capture subcommands" table.
| packets
| Capture packets data. For subcommands, see the "Packet capture subcommand" table.
| cleanup
| Remove the Network Observability CLI components.
| version
| Print the software version.
| help
| Show help.
|===

== Flows capture options
Flow capture has mandatory commands as well as additional options, such as enabling extra features about packet drops, DNS latencies, Round-trip time, and filtering.
.`oc netobserv flows` syntax
[source,terminal]
----
$ oc netobserv flows [<feature_option>] [<command_options>]
----
[cols="1,1,1",options="header"]
|===
| Option | Description | Default
|--enable_pktdrop|        enable packet drop                         | false
|--enable_dns|            enable DNS tracking                        | false
|--enable_rtt|            enable RTT tracking                        | false
|--enable_network_events| enable Network events monitoring           | false
|--get-subnets|           get subnets informations                   | false
|--log-level|             components logs                            | info
|--max-time|              maximum capture time                       | 5m
|--max-bytes|             maximum capture bytes                      | 50000000 = 50MB
|--background|            run in background                          | false
|--copy|                  copy the output files locally              | prompt
|--node-selector|         capture on specific nodes                  | n/a
|--enable_filter|         enable flow filter                         | false
|--direction|             filter direction                           | n/a
|--cidr|                  filter CIDR                                | 0.0.0.0/0
|--protocol|              filter protocol                            | n/a
|--sport|                 filter source port                         | n/a
|--dport|                 filter destination port                    | n/a
|--port|                  filter port                                | n/a
|--sport_range|           filter source port range                   | n/a
|--dport_range|           filter destination port range              | n/a
|--port_range|            filter port range                          | n/a
|--sports|                filter on either of two source ports       | n/a
|--dports|                filter on either of two destination ports  | n/a
|--ports|                 filter on either of two ports              | n/a
|--tcp_flags|             filter TCP flags                           | n/a
|--action|                filter action                              | Accept
|--icmp_type|             filter ICMP type                           | n/a
|--icmp_code|             filter ICMP code                           | n/a
|--peer_ip|               filter peer IP                             | n/a
|--drops|                 filter flows with only dropped packets     | false
|--regexes|               filter flows using regex                   | n/a
|--interfaces|            interfaces to monitor                      | n/a
|===

.Example running flow capture on TCP protocol and port 49051 with PacketDrop and RTT features enabled:
[source,terminal]
----
$ oc netobserv flows --enable_pktdrop=true  --enable_rtt=true --enable_filter=true --action=Accept --cidr=0.0.0.0/0 --protocol=TCP --port=49051
----
== Packets capture options
You can filter packet capture data as same as flow capture using the filters. However, the features are not available here.

.`oc netobserv packets` syntax
[source,terminal]
----
$ oc netobserv packets [<option>]
----
[cols="1,1,1",options="header"]
|===
| Option | Description | Default
|--log-level|             components logs                            | info
|--max-time|              maximum capture time                       | 5m
|--max-bytes|             maximum capture bytes                      | 50000000 = 50MB
|--background|            run in background                          | false
|--copy|                  copy the output files locally              | prompt
|--node-selector|         capture on specific nodes                  | n/a
|--enable_filter|         enable flow filter                         | false
|--direction|             filter direction                           | n/a
|--cidr|                  filter CIDR                                | 0.0.0.0/0
|--protocol|              filter protocol                            | n/a
|--sport|                 filter source port                         | n/a
|--dport|                 filter destination port                    | n/a
|--port|                  filter port                                | n/a
|--sport_range|           filter source port range                   | n/a
|--dport_range|           filter destination port range              | n/a
|--port_range|            filter port range                          | n/a
|--sports|                filter on either of two source ports       | n/a
|--dports|                filter on either of two destination ports  | n/a
|--ports|                 filter on either of two ports              | n/a
|--tcp_flags|             filter TCP flags                           | n/a
|--action|                filter action                              | Accept
|--icmp_type|             filter ICMP type                           | n/a
|--icmp_code|             filter ICMP code                           | n/a
|--peer_ip|               filter peer IP                             | n/a
|--drops|                 filter flows with only dropped packets     | false
|--regexes|               filter flows using regex                   | n/a
|===

.Example running packet capture on TCP protocol and port 49051:
[source,terminal]
----
$ oc netobserv packets --action=Accept --cidr=0.0.0.0/0 --protocol=TCP --port=49051
----
== Metrics capture options
You can enable features and use filters on metrics capture as same as flow capture. The generated graphs will fill accordingly.

.`oc netobserv metrics` syntax
[source,terminal]
----
$ oc netobserv metrics [<option>]
----
[cols="1,1,1",options="header"]
|===
| Option | Description | Default
|--enable_pktdrop|        enable packet drop                         | false
|--enable_dns|            enable DNS tracking                        | false
|--enable_rtt|            enable RTT tracking                        | false
|--enable_network_events| enable Network events monitoring           | false
|--get-subnets|           get subnets informations                   | false
|--node-selector|         capture on specific nodes                  | n/a
|--enable_filter|         enable flow filter                         | false
|--direction|             filter direction                           | n/a
|--cidr|                  filter CIDR                                | 0.0.0.0/0
|--protocol|              filter protocol                            | n/a
|--sport|                 filter source port                         | n/a
|--dport|                 filter destination port                    | n/a
|--port|                  filter port                                | n/a
|--sport_range|           filter source port range                   | n/a
|--dport_range|           filter destination port range              | n/a
|--port_range|            filter port range                          | n/a
|--sports|                filter on either of two source ports       | n/a
|--dports|                filter on either of two destination ports  | n/a
|--ports|                 filter on either of two ports              | n/a
|--tcp_flags|             filter TCP flags                           | n/a
|--action|                filter action                              | Accept
|--icmp_type|             filter ICMP type                           | n/a
|--icmp_code|             filter ICMP code                           | n/a
|--peer_ip|               filter peer IP                             | n/a
|--drops|                 filter flows with only dropped packets     | false
|--regexes|               filter flows using regex                   | n/a
|--interfaces|            interfaces to monitor                      | n/a
|===

.Example running metrics capture for TCP drops:
[source,terminal]
----
$ oc netobserv metrics --enable_pktdrop=true --enable_filter=true --protocol=TCP 
----
